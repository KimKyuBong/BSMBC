# ğŸ‰ ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°©ì†¡ ì‹œìŠ¤í…œ ì„¤ì¹˜ ì™„ë£Œ!

## âœ… ì„¤ì¹˜ ì™„ë£Œ í•­ëª©

### 1. ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€
- âœ“ **FFmpeg 7.1.2** - ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ì²˜ë¦¬
- âœ“ **VLC 3.0.21** - ì˜¤ë””ì˜¤ ì¬ìƒ (ALSA ì¶œë ¥)
- âœ“ **espeak/espeak-ng** - TTS ë°±ì—”ë“œ
- âœ“ **python3-pip** - Python íŒ¨í‚¤ì§€ ê´€ë¦¬ì

### 2. Python íŒ¨í‚¤ì§€
- âœ“ **audioop-lts 0.2.2** - Python 3.13 í˜¸í™˜ì„±
- âœ“ **numpy 2.3.4** - ìˆ˜ì¹˜ ì—°ì‚°
- âœ“ **scipy 1.16.2** - ê³¼í•™ ê³„ì‚°
- âœ“ **librosa 0.11.0** - ì˜¤ë””ì˜¤ ë¶„ì„
- âœ“ **soundfile 0.13.1** - ì˜¤ë””ì˜¤ íŒŒì¼ I/O
- âœ“ **pydub** - ì˜¤ë””ì˜¤ ì¡°ì‘
- âœ“ **python-vlc 3.0.21203** - VLC Python ë°”ì¸ë”©
- âœ“ **fastapi 0.119.0** - ì›¹ í”„ë ˆì„ì›Œí¬
- âœ“ **uvicorn 0.37.0** - ASGI ì„œë²„
- âœ“ **APScheduler** - ìŠ¤ì¼€ì¤„ë§
- âœ“ **pyotp** - TOTP ì¸ì¦

### 3. ì½”ë“œ ìˆ˜ì •
- âœ“ ìœˆë„ìš° â†’ ë¼ì¦ˆë² ë¦¬íŒŒì´ ê²½ë¡œ ë³€ê²½
- âœ“ FFmpeg ì‹œìŠ¤í…œ ê²½ë¡œ ì‚¬ìš©
- âœ“ VLC CLI í™˜ê²½ ìµœì í™”
- âœ“ í”„ë¦¬ë·° ë””ë ‰í† ë¦¬ ê²½ë¡œ ìˆ˜ì •

### 4. ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
/home/bmbc/project/BSMBC/data/
â”œâ”€â”€ audio/          # ì˜¤ë””ì˜¤ íŒŒì¼
â”œâ”€â”€ previews/       # í”„ë¦¬ë·° íŒŒì¼
â”‚   â””â”€â”€ test_preview.mp3
â”œâ”€â”€ temp/           # ì„ì‹œ íŒŒì¼
â”‚   â”œâ”€â”€ test_combined.mp3
â”‚   â””â”€â”€ test_normalized.mp3
â”œâ”€â”€ tts_models/     # TTS ëª¨ë¸ ìºì‹œ
â”œâ”€â”€ start.mp3       # ì‹œì‘ ì‹ í˜¸ìŒ (3.03ì´ˆ)
â””â”€â”€ end.mp3         # ë ì‹ í˜¸ìŒ (3.07ì´ˆ)
```

## âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ ê¸°ëŠ¥

### 1. ì˜¤ë””ì˜¤ ì¬ìƒ âœ“
- VLC ì¬ìƒ ì •ìƒ ì‘ë™
- ALSA ì˜¤ë””ì˜¤ ì¶œë ¥ í™•ì¸
- ì¬ìƒ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ì •ìƒ

### 2. ì˜¤ë””ì˜¤ ì¡°í•© (pydub) âœ“
- ì‹œì‘ìŒ + ë©”ì¸ ì˜¤ë””ì˜¤ + ëìŒ ì¡°í•© ì„±ê³µ
- 12.21ì´ˆ í”„ë¦¬ë·° ìƒì„± í™•ì¸
- MP3 ì €ì¥ ì •ìƒ (287.8 KB)

### 3. ì˜¤ë””ì˜¤ ì •ê·œí™” âœ“
- ffmpeg loudnorm í•„í„° ì‘ë™
- ë³¼ë¥¨ ë¶„ì„ ê¸°ëŠ¥ ì •ìƒ
- ëª©í‘œ ë³¼ë¥¨ -12.0 dBFS ì ìš©
- ì •ê·œí™” ì „í›„ í†µê³„ í™•ì¸

### 4. ì‹œìŠ¤í…œ í†µí•© âœ“
- BroadcastController ì´ˆê¸°í™” ì„±ê³µ
- BroadcastManager ì •ìƒ ì‘ë™
- AudioNormalizer ì •ìƒ ì‘ë™
- 64ê°œ ì¥ì¹˜ ë§¤íŠ¸ë¦­ìŠ¤ ë¡œë“œ ì™„ë£Œ

## ğŸš€ ì‹œìŠ¤í…œ ì‹¤í–‰ ë°©ë²•

### ì›¹ ì„œë²„ ëª¨ë“œ
```bash
cd /home/bmbc/project/BSMBC
python3 main.py
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://ë¼ì¦ˆë² ë¦¬íŒŒì´IP:8000` ì ‘ì†

### CLI ëª¨ë“œ
```bash
cd /home/bmbc/project/BSMBC
python3 cli.py --help
```

ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹:
- `python3 cli.py control 1-1 --on`  # 1í•™ë…„ 1ë°˜ ì¼œê¸°
- `python3 cli.py group grade1 --on`  # 1í•™ë…„ ì „ì²´ ì¼œê¸°
- `python3 cli.py status`  # ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸

## ğŸ“Š ì‹œìŠ¤í…œ ì •ë³´

### í™˜ê²½
- **OS**: Debian Trixie (Linux 6.12.47+rpt-rpi-v8)
- **Python**: 3.13.5
- **ì•„í‚¤í…ì²˜**: ARM64 (aarch64)

### ì˜¤ë””ì˜¤ ì¥ì¹˜
- bcm2835 Headphones (ê¸°ë³¸)
- vc4-hdmi-0 (HDMI)
- vc4-hdmi-1 (HDMI)

### ë„¤íŠ¸ì›Œí¬
- **ëŒ€ìƒ IP**: 192.168.0.200
- **ëŒ€ìƒ í¬íŠ¸**: 22000
- **ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤**: eth0

## âš™ï¸ ì£¼ìš” ì„¤ì •

### ì˜¤ë””ì˜¤ ì •ê·œí™”
- **ëª©í‘œ ë³¼ë¥¨**: -12.0 dBFS
- **í—¤ë“œë£¸**: 1.0 dB
- **ìƒ˜í”Œë ˆì´íŠ¸**: 44100 Hz
- **ë¹„íŠ¸ë ˆì´íŠ¸**: 192k-256k (MP3)

### VLC ì„¤ì • (CLI ìµœì í™”)
```
--no-video          # ë¹„ë””ì˜¤ ì¶œë ¥ ë¹„í™œì„±í™”
--aout=alsa         # ALSA ì˜¤ë””ì˜¤ ì¶œë ¥
--quiet             # ë¡œê·¸ ê°ì†Œ
```

## ğŸ”§ ì¶”ê°€ ê¶Œì¥ ì‚¬í•­

### 1. PATH ì„¤ì • (ì„ íƒì‚¬í•­)
```bash
echo 'export PATH=$PATH:/home/bmbc/.local/bin' >> ~/.bashrc
source ~/.bashrc
```

### 2. ìë™ ì‹œì‘ ì„¤ì • (systemd)
```bash
sudo nano /etc/systemd/system/broadcast.service
```

```ini
[Unit]
Description=School Broadcast System
After=network.target

[Service]
Type=simple
User=bmbc
WorkingDirectory=/home/bmbc/project/BSMBC
ExecStart=/usr/bin/python3 main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl enable broadcast.service
sudo systemctl start broadcast.service
```

### 3. ë³¼ë¥¨ ì¡°ì •
```bash
alsamixer  # í„°ë¯¸ë„ ë¯¹ì„œ
```

### 4. ë°©í™”ë²½ ì„¤ì • (í•„ìš”ì‹œ)
```bash
sudo ufw allow 8000/tcp  # ì›¹ ì„œë²„ í¬íŠ¸
```

## ğŸ“ ë¡œê·¸ í™•ì¸

### ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
```bash
tail -f /home/bmbc/project/BSMBC/logs/app_$(date +%Y%m%d).log
```

### ì‹œìŠ¤í…œ ë¡œê·¸
```bash
journalctl -u broadcast -f  # systemd ì„œë¹„ìŠ¤ ì‚¬ìš© ì‹œ
```

## âš ï¸ ì•Œë ¤ì§„ ì´ìŠˆ

### Python 3.13 audioop
- Python 3.13ì—ì„œ audioop ëª¨ë“ˆ ì œê±°ë¨
- **í•´ê²°**: audioop-lts 0.2.2 ì„¤ì¹˜ë¡œ í•´ê²° âœ“

### TTS ì—”ì§„ ê²½ê³ 
- pyttsx3 ë¡œë“œ ì‹¤íŒ¨ ê²½ê³  í‘œì‹œë¨
- **ì˜í–¥**: TTS ê¸°ëŠ¥ ì‚¬ìš© ì‹œ espeak ìˆ˜ë™ ì„¤ì • í•„ìš”
- **í•´ê²° ë°©ë²•**: espeakì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆì–´ ë¬¸ì œì—†ìŒ

## ğŸ¯ ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- í”„ë¦¬ë·° ìƒì„± ì‹œ ìŠ¤ë ˆë“œ í’€ ì‚¬ìš© (ìµœëŒ€ 4ê°œ)
- ì„ì‹œ íŒŒì¼ ìë™ ì •ë¦¬
- ì¥ì¹˜ ìƒíƒœ ë°±ì—…/ë³µì› ê¸°ëŠ¥

### ì˜¤ë””ì˜¤ í’ˆì§ˆ
- ê³ í’ˆì§ˆ ì •ê·œí™” ì˜µì…˜ ì§€ì›
- ë¬´ì†ì‹¤ ì¤‘ê°„ ì²˜ë¦¬ (PCM)
- ìµœì¢… ì¶œë ¥ MP3 ê³ í’ˆì§ˆ

## ğŸ“š ì°¸ê³  ë¬¸ì„œ
- `RASPBERRY_PI_SETUP.md` - ì„¤ì¹˜ ê³¼ì • ìƒì„¸ ê¸°ë¡
- `README.md` - í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš”
- `docs/security_guide.md` - ë³´ì•ˆ ì„¤ì • ê°€ì´ë“œ

---

## âœ… ìµœì¢… ì ê²€ ê²°ê³¼

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| FFmpeg/FFprobe | âœ… | 7.1.2 ì„¤ì¹˜ë¨ |
| VLC | âœ… | 3.0.21 ì„¤ì¹˜ë¨ |
| Python íŒ¨í‚¤ì§€ | âœ… | ëª¨ë‘ ì„¤ì¹˜ë¨ |
| ì˜¤ë””ì˜¤ ì¬ìƒ | âœ… | ì •ìƒ ì‘ë™ |
| ì˜¤ë””ì˜¤ ì¡°í•© | âœ… | pydub ì •ìƒ |
| ì˜¤ë””ì˜¤ ì •ê·œí™” | âœ… | ffmpeg loudnorm |
| ì‹œìŠ¤í…œ í†µí•© | âœ… | ëª¨ë“  ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ |

**ğŸ‰ ë¼ì¦ˆë² ë¦¬íŒŒì´ í™˜ê²½ì—ì„œ ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!**

ìƒì„±ì¼: 2025-10-17
ë²„ì „: 1.0.0
í”Œë«í¼: Raspberry Pi (Debian Trixie, ARM64)
