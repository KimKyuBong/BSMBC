# 방송 시스템 서버 - 간단한 실행 방법

## 🎯 개요

복잡한 Windows 서비스 대신 **단순하게 main.py만 실행**하는 방법입니다.

---

## 📋 파일 설명

| 파일명 | 용도 |
|--------|------|
| `start_simple.bat` | 서버를 수동으로 시작 (창이 열림) |
| `install_startup.bat` | 시스템 시작 시 자동 실행 설정 |
| `uninstall_startup.bat` | 자동 실행 해제 |
| `test_server.bat` | 서버 작동 확인 |

---

## 🚀 사용 방법

### 방법 1: 수동으로 서버 실행

1. **`start_simple.bat`** 더블클릭
2. 창이 열리고 서버가 시작됨
3. 서버 종료하려면 `Ctrl+C` 누르거나 창 닫기

```
✅ 가상환경 발견
🚀 서버 시작 중...

서버 종료하려면 Ctrl+C를 누르세요

방송 제어 시스템 서버를 시작합니다...
INFO:     Started server process [12345]
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### 방법 2: 시스템 시작 시 자동 실행

1. **`install_startup.bat`** 우클릭 → **"관리자 권한으로 실행"**
2. 설치 완료 메시지 확인
3. 이제 PC를 재부팅하면 자동으로 서버가 시작됨

```
✅ 설치 완료!

시스템이 시작될 때 자동으로 서버가 실행됩니다.

📌 작업 이름: 방송시스템자동실행
📌 실행 계정: SYSTEM
📌 트리거: 시스템 시작 시
```

### 자동 실행 해제

- **`uninstall_startup.bat`** 우클릭 → **"관리자 권한으로 실행"**

---

## 🔍 서버 확인

### 1. 테스트 배치 파일 사용

```batch
test_server.bat
```

### 2. 브라우저에서 확인

- **API 문서**: http://localhost:8000/docs
- **헬스체크**: http://localhost:8000/health
- **메인페이지**: http://localhost:8000/

### 3. 명령어로 확인

```bash
curl http://localhost:8000/health
```

정상 응답:
```json
{"status":"healthy"}
```

---

## ⚙️ 작업 스케줄러에서 관리

1. `Win + R` → `taskschd.msc` 입력
2. 작업 스케줄러 라이브러리에서 **"방송시스템자동실행"** 찾기
3. 우클릭으로 실행/중지/삭제 가능

---

## 🆚 기존 Windows 서비스와 차이점

| 항목 | Windows 서비스 (기존) | 작업 스케줄러 (새 방법) |
|------|-------------------|-------------------|
| 복잡도 | 높음 (pywin32 필요) | 낮음 (배치파일만) |
| 설치 | 복잡 | 간단 |
| 디버깅 | 어려움 (로그만) | 쉬움 (콘솔 확인 가능) |
| 타임아웃 문제 | 있음 (30초 제한) | 없음 |
| 관리 | services.msc | taskschd.msc |

---

## 🐛 문제 해결

### 서버가 시작되지 않을 때

1. `start_simple.bat`을 실행해서 에러 메시지 확인
2. 로그 파일 확인: `logs\app_YYYYMMDD.log`

### 포트가 이미 사용 중일 때

```bash
# 8000 포트 사용 중인 프로세스 찾기
netstat -ano | findstr :8000

# 해당 PID 프로세스 종료
taskkill /F /PID [PID번호]
```

### 자동 실행이 안될 때

1. 작업 스케줄러 열기: `taskschd.msc`
2. "방송시스템자동실행" 작업 찾기
3. 속성 → 트리거 → "시스템 시작 시" 확인
4. 속성 → 일반 → "가장 높은 수준의 권한으로 실행" 체크 확인

---

## 📝 참고

- 서버는 기본적으로 **8000번 포트**에서 실행됩니다
- 로그는 `logs` 폴더에 날짜별로 저장됩니다
- 가상환경(`venv`)이 필수로 필요합니다

---

## ✅ 권장 사용법

1. **개발/테스트**: `start_simple.bat` 사용 (콘솔에서 직접 확인)
2. **운영/자동화**: `install_startup.bat` 사용 (백그라운드 자동 실행)



